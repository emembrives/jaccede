"use strict";function jaccede(e,t){function r(r,n,a,i,u){var s={name:r,address:n};void 0!=a&&void 0!=i&&(s.latitude=a,s.longitude=i);var c=new jsSHA("SHA-256","TEXT");c.setHMACKey(t,"TEXT"),c.update(window.location),c.update(JSON.stringify(s)),s.hash=c.getHMAC("HEX");var f=new XMLHttpRequest;f.open("POST",e,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),f.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?o(JSON.parse(this.responseText),u):console.log(this.status))},f.send(s),f=null}function n(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function o(e,t){if(e.Accessible){var r=document.createElement("div");n(r,"jaccede-accessible-icon"),r.innerHTML="<a title='Référencé par Jaccede.com'><img src='http://www.jaccede.com/favicon.ico'></a>",r.firstChild.setAttribute("href","http://www.jaccede.com/fr/p/"+e.JaccedeUid),t.insertBefore(r,t.firstChild)}}function a(){for(var e=document.querySelectorAll(".jaccede-accessible-div"),t=0;t<e.length;t++){var n=e[t];n.innerHTML="",r(n.getAttribute("data-jxd-name"),n.getAttribute("data-jxd-address"),n.getAttribute("data-jxd-latitude"),n.getAttribute("data-jxd-longitude"),n)}}return a}!function(e){function t(e,t,r){var n,o,a,h,d,l,p,g,w=0,b=[],E=0,v=!1,A=!1,S=[],T=[],C=!1;if(r=r||{},n=r.encoding||"UTF8",g=r.numRounds||1,a=f(t,n),g!==parseInt(g,10)||1>g)throw Error("numRounds must a integer >= 1");if(l=function(t,r){return m(t,r,e)},p=function(t,r,n,o){var a,i;if("SHA-224"!==e&&"SHA-256"!==e)throw Error("Unexpected error in SHA-2 implementation");for(a=(r+65>>>9<<4)+15,i=16;t.length<=a;)t.push(0);for(t[r>>>5]|=128<<24-r%32,t[a]=r+n,n=t.length,r=0;n>r;r+=i)o=m(t.slice(r,r+i),o,e);if("SHA-224"===e)t=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else{if("SHA-256"!==e)throw Error("Unexpected error in SHA-2 implementation");t=o}return t},"SHA-224"===e)d=512,h=224;else{if("SHA-256"!==e)throw Error("Chosen SHA variant is not supported");d=512,h=256}o=H(e),this.setHMACKey=function(t,r,a){var i;if(!0===A)throw Error("HMAC key already set");if(!0===v)throw Error("Cannot set HMAC key after finalizing hash");if(!0===C)throw Error("Cannot set HMAC key after calling update");if(n=(a||{}).encoding||"UTF8",r=f(r,n)(t),t=r.binLen,r=r.value,i=d>>>3,a=i/4-1,t/8>i){for(r=p(r,t,0,H(e));r.length<=a;)r.push(0);r[a]&=4294967040}else if(i>t/8){for(;r.length<=a;)r.push(0);r[a]&=4294967040}for(t=0;a>=t;t+=1)S[t]=909522486^r[t],T[t]=1549556828^r[t];o=l(S,o),w=d,A=!0},this.update=function(e){var t,r,n,i=0,u=d>>>5;for(t=a(e,b,E),e=t.binLen,r=t.value,t=e>>>5,n=0;t>n;n+=u)e>=i+d&&(o=l(r.slice(n,n+u),o),i+=d);w+=i,b=r.slice(i>>>5),E=e%d,C=!0},this.getHash=function(t,r){var n,a,f;if(!0===A)throw Error("Cannot call getHash after setting HMAC key");switch(f=c(r),t){case"HEX":n=function(e){return i(e,f)};break;case"B64":n=function(e){return u(e,f)};break;case"BYTES":n=s;break;default:throw Error("format must be HEX, B64, or BYTES")}if(!1===v)for(o=p(b,E,w,o),a=1;g>a;a+=1)o=p(o,h,0,H(e));return v=!0,n(o)},this.getHMAC=function(t,r){var n,a,f;if(!1===A)throw Error("Cannot call getHMAC without first setting HMAC key");switch(f=c(r),t){case"HEX":n=function(e){return i(e,f)};break;case"B64":n=function(e){return u(e,f)};break;case"BYTES":n=s;break;default:throw Error("outputFormat must be HEX, B64, or BYTES")}return!1===v&&(a=p(b,E,w,o),o=l(T,H(e)),o=p(a,h,d,o)),v=!0,n(o)}}function r(){}function n(e,t,r){var n,o,a,i,u,s=e.length;if(t=t||[0],r=r||0,u=r>>>3,0!==s%2)throw Error("String of HEX type must be in byte increments");for(n=0;s>n;n+=2){if(o=parseInt(e.substr(n,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(i=(n>>>1)+u,a=i>>>2;t.length<=a;)t.push(0);t[a]|=o<<8*(3-i%4)}return{value:t,binLen:4*s+r}}function o(e,t,r){var n,o,a,i,u=[],u=t||[0];for(r=r||0,o=r>>>3,n=0;n<e.length;n+=1)t=e.charCodeAt(n),i=n+o,a=i>>>2,u.length<=a&&u.push(0),u[a]|=t<<8*(3-i%4);return{value:u,binLen:8*e.length+r}}function a(e,t,r){var n,o,a,i,u,s,c=[],f=0,c=t||[0];if(r=r||0,t=r>>>3,-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=e.indexOf("="),e=e.replace(/\=/g,""),-1!==o&&o<e.length)throw Error("Invalid '=' found in base-64 string");for(o=0;o<e.length;o+=4){for(u=e.substr(o,4),a=i=0;a<u.length;a+=1)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u[a]),i|=n<<18-6*a;for(a=0;a<u.length-1;a+=1){for(s=f+t,n=s>>>2;c.length<=n;)c.push(0);c[n]|=(i>>>16-8*a&255)<<8*(3-s%4),f+=1}}return{value:c,binLen:8*f+r}}function i(e,t){var r,n,o="",a=4*e.length;for(r=0;a>r;r+=1)n=e[r>>>2]>>>8*(3-r%4),o+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return t.outputUpper?o.toUpperCase():o}function u(e,t){var r,n,o,a="",i=4*e.length;for(r=0;i>r;r+=3)for(o=r+1>>>2,n=e.length<=o?0:e[o],o=r+2>>>2,o=e.length<=o?0:e[o],o=(e[r>>>2]>>>8*(3-r%4)&255)<<16|(n>>>8*(3-(r+1)%4)&255)<<8|o>>>8*(3-(r+2)%4)&255,n=0;4>n;n+=1)a+=8*r+6*n<=32*e.length?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-n)&63):t.b64Pad;return a}function s(e){var t,r,n="",o=4*e.length;for(t=0;o>t;t+=1)r=e[t>>>2]>>>8*(3-t%4)&255,n+=String.fromCharCode(r);return n}function c(e){var t={outputUpper:!1,b64Pad:"="};if(e=e||{},t.outputUpper=e.outputUpper||!1,t.b64Pad=e.b64Pad||"=","boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function f(e,t){var r;switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":r=n;break;case"TEXT":r=function(e,r,n){var o,a,i,u,s,c=[],f=[],h=0,c=r||[0];if(r=n||0,i=r>>>3,"UTF8"===t)for(o=0;o<e.length;o+=1)for(n=e.charCodeAt(o),f=[],128>n?f.push(n):2048>n?(f.push(192|n>>>6),f.push(128|63&n)):55296>n||n>=57344?f.push(224|n>>>12,128|n>>>6&63,128|63&n):(o+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(o)),f.push(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n)),a=0;a<f.length;a+=1){for(s=h+i,u=s>>>2;c.length<=u;)c.push(0);c[u]|=f[a]<<8*(3-s%4),h+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(o=0;o<e.length;o+=1){for(n=e.charCodeAt(o),"UTF16LE"===t&&(a=255&n,n=a<<8|n>>>8),s=h+i,u=s>>>2;c.length<=u;)c.push(0);c[u]|=n<<8*(2-s%4),h+=2}return{value:c,binLen:8*h+r}};break;case"B64":r=a;break;case"BYTES":r=o;break;default:throw Error("format must be HEX, TEXT, B64, or BYTES")}return r}function h(e,t){return e>>>t|e<<32-t}function d(e,t,r){return e&t^~e&r}function l(e,t,r){return e&t^e&r^t&r}function p(e){return h(e,2)^h(e,13)^h(e,22)}function g(e){return h(e,6)^h(e,11)^h(e,25)}function w(e){return h(e,7)^h(e,18)^e>>>3}function b(e){return h(e,17)^h(e,19)^e>>>10}function E(e,t){var r=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(r>>>16)&65535)<<16|65535&r}function v(e,t,r,n){var o=(65535&e)+(65535&t)+(65535&r)+(65535&n);return((e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(o>>>16)&65535)<<16|65535&o}function A(e,t,r,n,o){var a=(65535&e)+(65535&t)+(65535&r)+(65535&n)+(65535&o);return((e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(o>>>16)+(a>>>16)&65535)<<16|65535&a}function H(e){var t,n;switch(t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":e=t;break;case"SHA-256":e=n;break;case"SHA-384":e=[new r,new r,new r,new r,new r,new r,new r,new r];break;case"SHA-512":e=[new r,new r,new r,new r,new r,new r,new r,new r];break;default:throw Error("Unknown SHA variant")}return e}function m(e,t,r){var n,o,a,i,u,s,c,f,h,H,m,T,C,U,k,y,x,B,L,F,X,M,j,P=[];if("SHA-224"!==r&&"SHA-256"!==r)throw Error("Unexpected error in SHA-2 implementation");for(H=64,T=1,M=Number,C=E,U=v,k=A,y=w,x=b,B=p,L=g,X=l,F=d,j=S,r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],m=0;H>m;m+=1)16>m?(h=m*T,f=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],P[m]=new M(f,h)):P[m]=U(x(P[m-2]),P[m-7],y(P[m-15]),P[m-16]),f=k(c,L(i),F(i,u,s),j[m],P[m]),h=C(B(r),X(r,n,o)),c=s,s=u,u=i,i=C(a,f),a=o,o=n,n=r,r=C(f,h);return t[0]=C(r,t[0]),t[1]=C(n,t[1]),t[2]=C(o,t[2]),t[3]=C(a,t[3]),t[4]=C(i,t[4]),t[5]=C(u,t[5]),t[6]=C(s,t[6]),t[7]=C(c,t[7]),t}var S;S=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=t:exports=t:e.jsSHA=t}(this);